{
	"name": "HomegearSerial::read",
	"category": "Serial Communication",
	"shortDescription": "Reads data from a serial device.",
	"description": "This method reads one line of data (terminated by a new line character: 0x0A, \"\\n\" or 0x0D0A, \"\\r\\n\") from a serial device previously opened with HomegearSerial::open().",
	"signatures": ["string read(resource $handle, int $timeout)"],
	"parameters": [{
		"name": "handle",
		"type": "resource",
		"description": "The file pointer resource returned by HomegearSerial::open()",
		"exampleValue": ""
	}, {
		"name": "timeout",
		"type": "int",
		"description": "The maximum amount of time to wait for data in milliseconds.",
		"exampleValue": "5000"
	}],
	"returnValue": "Returns \"true\" on success.",
	"errors": [{
		"code": -1,
		"description": "Error reading from device."
	}, {
		"code": -2,
		"description": "Timeout."
	}],
	"example": "PD9waHANCi8qKg0KICogVGhpcyBleGFtcGxlIHNob3dzIHlvdSBob3cgdG8gc2VuZCBhbmQgcmVjZWl2ZSBGUzIwIHBhY2tldHMgd2l0aCBhIENVTCBzdGljay4NCiAqLw0KDQovKioNCiAqIENsYXNzIHRvIHNoYXJlIGRhdGEgYmV0d2VlbiB0aGUgbWFpbiBzY3JpcHQgYW5kIHRoZSByZWFkIHRocmVhZC4NCiAqLw0KY2xhc3MgU2hhcmVkRGF0YSBleHRlbmRzIFRocmVhZGVkDQp7DQogICAgcHVibGljICRoYW5kbGU7DQoNCiAgICBwdWJsaWMgZnVuY3Rpb24gcnVuKCkge30NCn0NCg0KLyoqDQogKiBDbGFzcyB0byBwcm9jZXNzIGV2ZW50cyByZWNlaXZlZCBmcm9tIEhvbWVnZWFyDQogKi8NCmNsYXNzIFJlYWRUaHJlYWQgZXh0ZW5kcyBUaHJlYWQNCnsNCiAgICBwcml2YXRlICRzaGFyZWREYXRhOw0KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkc2hhcmVkRGF0YSkNCiAgICB7DQogICAgICAgICR0aGlzLT5zaGFyZWREYXRhID0gJHNoYXJlZERhdGE7DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyBmdW5jdGlvbiBydW4oKQ0KICAgIHsNCiAgICAJLy8gQ3JlYXRlIGEgbmV3IEhvbWVnZWFyIG9iamVjdA0KCQkkaGcgPSBuZXcgXEhvbWVnZWFyXEhvbWVnZWFyOw0KDQoJCS8vIENyZWF0ZSBhIG5ldyBIb21lZ2VhclNlcmlhbCBvYmplY3QuDQoJCSRzZXJpYWwgPSBuZXcgXEhvbWVnZWFyXEhvbWVnZWFyU2VyaWFsKCk7DQoNCiAgICAgICAgLy8gUnVuIHRoZSB0aHJlYWQgdW50aWwgSG9tZWdlYXIgc2h1dHMgZG93bi4NCiAgICAgICAgd2hpbGUoISRoZy0+c2h1dHRpbmdEb3duKCkpDQogICAgICAgIHsNCiAgICAgICAgICAgICRyZXN1bHQgPSAkc2VyaWFsLT5yZWFkKCR0aGlzLT5zaGFyZWREYXRhLT5oYW5kbGUsIDUwMDApOw0KICAgICAgICAgICAgaWYoJHJlc3VsdCA9PT0gLTEpIC8vIFJlYWQgZXJyb3INCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgIAkvLyBSZW9wZW4gZGV2aWNlDQogICAgICAgICAgICAJJHNlcmlhbC0+Y2xvc2UoJHRoaXMtPnNoYXJlZERhdGEtPmhhbmRsZSk7DQogICAgICAgICAgICAJJHRoaXMtPnNoYXJlZERhdGEtPmhhbmRsZSA9ICRzZXJpYWwtPm9wZW4oIi9kZXYvdHR5QUNNMCIsIDM4NDAwKTsNCg0KICAgICAgICAgICAgCS8vIExpc3RlbiBmb3IgRlMyMCBwYWNrZXRzDQogICAgICAgICAgICAJJHNlcmlhbC0+d3JpdGUoJHRoaXMtPnNoYXJlZERhdGEtPmhhbmRsZSwgIlgyMVxuIik7DQogICAgICAgICAgICAJY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmKCRyZXN1bHQgIT09IC0yKSAvLyBUaW1lb3V0Pw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICRoZy0+bG9nKDQsICJGUzIwIHBhY2tldCByZWNlaXZlZDogIi50cmltKCRyZXN1bHQpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgJGhnLT5sb2coNCwgIlRpbWVvdXQuIik7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCi8vIENyZWF0ZSBhIG5ldyBIb21lZ2VhciBvYmplY3QNCiRoZyA9IG5ldyBcSG9tZWdlYXJcSG9tZWdlYXI7DQoNCi8vIENyZWF0ZSBhIG5ldyBIb21lZ2VhclNlcmlhbCBvYmplY3QuDQokc2VyaWFsID0gbmV3IFxIb21lZ2VhclxIb21lZ2VhclNlcmlhbCgpOw0KDQovLyBDcmVhdGUgbmV3IG9iamVjdCBmb3Igc2hhcmluZyBkYXRhIGJldHdlZW4gbWFpbiBhbmQgZXZlbnQgdGhyZWFkLg0KJHNoYXJlZERhdGEgPSBuZXcgU2hhcmVkRGF0YSgpOw0KDQovLyBPcGVuIHRoZSBzZXJpYWwgZGV2aWNlIGFuZCBzZXQgc3BlZWQgdG8gMzg0MDAgYmF1ZC4gU3RvcmUgdGhlIHJldHVybmVkIGhhbmRsZSBpbiAkc2hhcmVkRGF0YS4NCiRzaGFyZWREYXRhLT5oYW5kbGUgPSAkc2VyaWFsLT5vcGVuKCIvZGV2L3R0eUFDTTAiLCAzODQwMCk7DQppZigkc2hhcmVkRGF0YS0+aGFuZGxlID09PSBmYWxzZSkgZGllKCJDb3VsZCBub3Qgb3BlbiBzZXJpYWwgZGV2aWNlLiIpOw0KDQovLyBMaXN0ZW4gZm9yIEZTMjAgcGFja2V0cw0KJHNlcmlhbC0+d3JpdGUoJHNoYXJlZERhdGEtPmhhbmRsZSwgIlgyMVxuIik7DQoNCi8vIENyZWF0ZSBhbmQgc3RhcnQgbmV3IHJlYWQgdGhyZWFkLg0KJHRocmVhZCA9IG5ldyBSZWFkVGhyZWFkKCRzaGFyZWREYXRhKTsNCiR0aHJlYWQtPnN0YXJ0KCk7DQoNCiRvbiA9IGZhbHNlOw0KDQovLyBSdW4gbWFpbiB0aHJlYWQgdW50aWwgSG9tZWdlYXIgc2h1dHMgZG93bi4NCndoaWxlKCEkaGctPnNodXR0aW5nRG93bigpKQ0Kew0KICAgIC8vIFdhaXQgdG8gYmUgbm90aWZpZWQgYnkgZXZlbnQgdGhyZWFkIHdpdGggYSB0aW1lb3V0IG9mIDUgc2Vjb25kcy4NCiAgICAkdGhyZWFkLT5zeW5jaHJvbml6ZWQoZnVuY3Rpb24oJHRocmVhZCl7ICR0aHJlYWQtPndhaXQoNTAwMDAwMCk7IH0sICR0aHJlYWQpOw0KICAgIA0KICAgIGlmKCEkb24pIC8vIFN3aXRjaCBvbg0KICAgIHsNCiAgICAJJHNlcmlhbC0+d3JpdGUoJHNoYXJlZERhdGEtPmhhbmRsZSwgIkYyRThFMDAxMVxuIik7DQogICAgCSRvbiA9IHRydWU7DQogICAgfQ0KICAgIGVsc2UgLy8gU3dpdGNoIG9mZg0KICAgIHsgDQogICAgCSRzZXJpYWwtPndyaXRlKCRzaGFyZWREYXRhLT5oYW5kbGUsICJGMkU4RTAwMDBcbiIpOw0KICAgIAkkb24gPSBmYWxzZTsNCiAgICB9DQp9DQoNCi8vIFdhaXQgZm9yIGV2ZW50IHRocmVhZCB0byBmaW5pc2guDQokdGhyZWFkLT5qb2luKCk7DQo/Pg=="
}
